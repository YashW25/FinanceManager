{% extends 'base.html' %}
{% block content %}
<div class="container" style="margin-top:20px; align-items: center; display: flex; flex-direction: column; gap: 20px;">
  <h2>Transactions</h2>
  <form method="post" action="{{ url_for('transactions.add_transaction') }}" class="card" style="padding:12px;margin-bottom:16px">
    <div class="form-row" style="display:flex;gap:8px;flex-wrap:wrap">
      <select name="type" class="form-control" required>
        <option value="income">Income</option>
        <option value="expense">Expense</option>
      </select>
      <input type="date" name="date" class="form-control" required />
      <input type="text" name="category" style="width: 278px;" placeholder="Category" class="form-control" required />
      <input type="number" step="0.01" name="amount" placeholder="Amount" class="form-control" required />
      <input type="text" name="notes" placeholder="Notes (optional)" class="form-control" />
      <button class="btn btn-primary" type="submit">Add</button>
    </div>
  </form>

  <table class="table">
    <thead>
      <tr><th>Date</th><th>Type</th><th>Category</th><th>Amount</th><th>Notes</th><th></th></tr>
    </thead>
    <tbody>
      {% for t in items %}
      <tr>
        <td>{{ t.date }}</td>
        <td>{{ t.type|capitalize }}</td>
        <td>{{ t.category }}</td>
        <td>{{ '%.2f'|format(t.amount) }}</td>
        <td>{{ t.notes }}</td>
        <td style="white-space:nowrap">
          <form method="post" action="{{ url_for('transactions.delete_transaction', txn_id=t.id) }}" style="display:inline">
            <button class="btn btn-danger" onclick="return confirm('Delete transaction?')">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div style="margin-top:10px; padding-left: 775px;">
    <a class="btn" href="{{ url_for('dashboard.index') }}">Back to Dashboard</a>
  </div>
</div>
{% endblock %}


